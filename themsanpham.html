<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="js/productmenu.js"></script>

</head>

<body>
<form name="addproduct" onSubmit="return check();">
  <table width="700px;">
    <tbody>
		<tr>
        	<td colspan="2" style="font-size: 40px; text-align: center"><strong>Thêm sản phẩm</strong></td>
      	</tr>
      	<tr>
			<td style="width: 100px;">Mã sản phẩm:</td>
			<td style="width: 600px;"><input type="text" name="addid"></td>
		</tr>
		<tr>
			<td>Tên sản phẩm:</td>
			<td><input type="text" name="addname"></td>
		</tr>
		<tr>
			<td>Hình ảnh:</td>
			<td><input type="file" name="addimg" accept="image/png, image/jpg, image/jpeg"></td>
		</tr>
		<tr>
			<td>Thể loại:</td>
			<td>
				<script>
					var d = 0;
					for(var i=0;i< m.length;i++)
					{
						d++;
						document.write('<div style="float:left; width:140px;"><input type="checkbox" name="theloai" value="'+m[i].mamenu+'">'+m[i].ten+'</div>');
						if(d==4)
						{
							document.write("<br>");
							d=0;
						}
					}
				</script>
			</td>
		</tr>
		<tr>
			<td>Giá:</td>
			<td><input type="number" name="addprice"> (VNĐ)</td>
		</tr>
		<tr>
			<td>Thông tin sản phẩm:</td>
			<td><textarea rows="4" cols="60" name="addinf"></textarea></td>
		</tr>
		<tr>
			<td colspan="2"><input type="submit" value="Thêm sản phẩm"></td>
		</tr>
    </tbody>
  </table>
</form>
<script>
	function check()
	{
		flag=1;
		var id = document.addproduct.addid;
		var name = document.addproduct.addname;
		var img = document.addproduct.addimg;
		var dd = /(\.jpg|\.jpeg|\.png)/i;
		var theloai = document.addproduct.theloai;
		var tl = 0;
		var gia = document.addproduct.addprice;
		var ttsp = document.addproduct.addinf;
		for(var i=0;i<theloai.length;i++)
		{
			if(theloai[i].checked === true) tl++;
		}
		if(id.value=="")
		{	
			alert("Xin vui lòng nhập mã sản phẩm.");
			id.focus();
			flag=0;
		}
		else if(name.value=="")
		{	
			alert("Xin vui lòng nhập tên sản phẩm.");
			name.focus();
			flag=0;
		}
		else if(img.value=="")
		{
			alert("Xin vui lòng thêm hình ảnh.")
			img.focus();
			flag=0;
		}
		else if(!dd.exec(img.value))
		{
			alert("Định dạng ảnh không đúng.")
			img.focus();
			flag=0;
		}
		else if(tl==0)
		{
			alert("Xin vui lòng chọn ít nhất 1 thể loại.");
			flag=0;
		}
		else if(gia.value=="")
		{
			alert("Xin vui lòng nhập giá tiền.");
			gia.focus();
			flag=0;
		}
		else if(ttsp.value=="")
		{
			alert("Xin vui lòng nhập thông tin sản phẩm.");
			ttsp.focus();
			flag=0;
		}
		else
		{
			for(var i=0;i<sp.length;i++)
			{
				if(sp[i].masp==id.value)
				{
					alert("Mã sản phẩm bị trùng.");
					id.focus();
					flag=0;
					break;
				}
			}	
		}
		if (flag==1)
		{
			alert("Thêm sản phẩm thành công.")
			//window.location="Admin.html";
			window.close();
			return false;
		}
		else	
			return false;
	}
</script>
</body>
</html>
